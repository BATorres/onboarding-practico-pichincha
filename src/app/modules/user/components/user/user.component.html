<h2>Usuarios</h2>

<div class="row">
  <div class="col-8">
    <input
      class="form-control"
      type="text"
      placeholder="Busque un usuario por su nombre"
      [(ngModel)]="searchQuery"
    />
  </div>
  <div class="col-3"></div>
  <div class="col-1">
    <button class="btn btn-global text-center" (click)="createUser()">
      + Nuevo
    </button>
  </div>
</div>

<div class="row pt-5 pb-5">
  <div class="col-12">
    <table>
      <thead>
        <tr>
          <th *ngFor="let title of headers" class="text-center">{{ title }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users | searchFilter: searchQuery">
          <td>
            {{ user.name }}
          </td>
          <td>
            {{ user.email }}
          </td>
          <td>
            {{ user.role }}
          </td>
          <td class="text-center">
            <button class="btn btn-global" (click)="editUser(user)">Editar</button>
            <button class="btn btn-global" (click)="deleteUser(user?.id)">Eliminar</button>
          </td>
        </tr>
        
        <tr *ngIf="users.length === 0">
          <td colspan="4">No existen registros</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div *ngIf="showModal">
  <!-- <app-modal
  [module]="'usuario'"
  [data]="user"
  (sendModalResponse)="listenModalButtons($event)"
  ></app-modal> -->

  <app-user-form [data]="user" (sendFormValues)="listenModalButtons($event)"></app-user-form>
</div>
